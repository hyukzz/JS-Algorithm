## 클라이언트-서버 통신과 API

클라이언트와 서버 간의 통신을 알아보려면, 먼저 프로토콜이라는 개념을 이해해야 한다.

프로토콜은 통신 규약, 즉 약속입니다. 카페를 예시로 들면 손님이 주문을 받는 사람에게 대뜸 찾아가, 이세상에 없는 언어로 주문을 할 수 없듯이 주문을 하기 위해서는 꼭 지켜야 하는 약속이 몇가지 존재한다.

웹 애플리케이션 아키텍처에서는 클라이언트와 서버가 서로 HTTP라는 프로토콜을 이용해서 서로 대화를 나눕니다. HTTP를 이용해 주고받는 메시지는 "HTTP 메시지"라고 부른다.

계속해서 카페로 예시를 들면 직접 주문, 키오스크로 주문, 앱으로 주문 이렇게 다양한 방법으로 주문을 할 수 있는데 이런 방법 하나하나가 전부 프로토콜이다. 즉, 같은 일을 하기 위해 다양한 방법이 존재하는 것이다.

프로토콜은 각자의 프로토콜마다 지켜야 하는 규약이 존재한다.

MDN에서의 "HTTP 메시지" 라는 항목을 잘 살펴보면, HTTP 만의 규칙이 있음을 발견할 수 있다.

OSI 7 Layers는 해당 프로토콜이 어떤 계층(layer)에 속해있는지를 표시하고 있다.

1. 물리 계층
2. 데이터 링크 계층
3. 네트워크 계층
4. 전송 계층
5. 세션 계층
6. 표현 계층
7. 응용 계층

API(Application Programming Interface)

서버는 클라이언트에게 리소스를 잘 활용할 수 있도록 인터페이스(interface)를 제공해줘야 한다. 이것을 API라고 한다.

카페로 예를 들어 생각해보면, 메뉴판과 같은 역할을 한다고 볼 수 있다.

클라이언트가 카페에서 제공하는 자원의 종류(아메리카노, 콜드브루, 프라푸치노 등)를 모른다고 가정할 경우, 엉뚱한 메뉴(예를 들어 치킨)를 시키지 않도록 도와주어야 한다.

카페에서 "고객님은 콜드브루, 아메리카노와 같은 메뉴를 주문할 수 있습니다" 라고 메뉴판을 설계해놓았기 때문에, 우리는 이에 맞게 적절한 요청("아메리카노 주세요")을 할 수가 있는 것이다.

마찬가지로 서버가 리소스 전달을 위한 메뉴판, 즉 API를 구축해놓아야 클라이언트가 이를 활용할 수 있다.

보통 인터넷에 있는 데이터를 요청할 때에는 HTTP라는 프로토콜을 사용하며, 주소(URL, URI)를 통해 접근할 수 있게 된다.

HTTP 요청에는 메소드라는 것이 존재한다. 앞서 카페 예시에서는 리소스를 그저 달라고(GET) 요청했지만, 사용자 관리 API에서는 사용자를 추가해 달라고(CREATE) 요청하거나, 지워달라고(DELETE) 요청할 수도 있다.

마치 CRUD 행동과 비슷하다. CRUD 각각의 행동과 일치하는 HTTP 메소드의 종류가 존재한다.

GET, POST, PUT(또는 PATCH), DELETE

각각 조회, 추가, 갱신, 삭제와 관련이 있다.
(메소드 설명은 MDN "HTTP 요청 메서드"를 참고)

이때 HTTP 메소드는 리소스를 이용해 하려는 행동에 맞게 적절하게 써야 한다. 만일 GET 요청을 했는데, 갑자기 서버에서 리소스가 지워진다면 좋은 API 디자인이라고 볼 수 없다.
